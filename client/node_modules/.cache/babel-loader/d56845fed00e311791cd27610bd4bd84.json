{"ast":null,"code":"var _jsxFileName = \"/home/hstefanski/College/WAD2019/carlet/client/src/components/loginPage/index.js\";\nimport React, { Component, Fragment } from 'react';\nimport OktaSignIn from '@okta/okta-signin-widget';\nimport Backbone from 'backbone';\nimport { withRouter } from 'react-router-dom';\n\nclass LoginPage extends Component {\n  constructor() {\n    super();\n    this.state = {\n      user: null\n    };\n    this.widget = new OktaSignIn({\n      baseUrl: 'https://{oktaOrgUrl}',\n      clientId: '{clientId}',\n      redirectUri: 'http://localhost:3000',\n      authParams: {\n        responseType: 'id_token'\n      }\n    });\n    this.showLogin = this.showLogin.bind(this);\n    this.logout = this.logout.bind(this);\n  }\n\n  componentDidMount() {\n    this.widget.session.get(response => {\n      if (response.status !== 'INACTIVE') {\n        this.setState({\n          user: response.login\n        });\n      } else {\n        this.showLogin();\n      }\n    });\n  }\n\n  showLogin() {\n    Backbone.history.stop();\n    this.widget.renderEl({\n      el: this.loginContainer\n    }, response => {\n      this.setState({\n        user: response.claims.email\n      });\n    }, err => {\n      console.log(err);\n    });\n  }\n\n  logout() {\n    this.widget.signOut(() => {\n      this.setState({\n        user: null\n      });\n      this.showLogin();\n    });\n  }\n\n  render() {\n    return React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"jumbotron\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, this.state.user ? React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, \"Welcome, \", this.state.user, \"!\"), React.createElement(\"button\", {\n      onClick: this.logout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"Logout\")) : null, this.state.user ? null : React.createElement(\"div\", {\n      ref: div => {\n        this.loginContainer = div;\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default withRouter(LoginPage);","map":{"version":3,"sources":["/home/hstefanski/College/WAD2019/carlet/client/src/components/loginPage/index.js"],"names":["React","Component","Fragment","OktaSignIn","Backbone","withRouter","LoginPage","constructor","state","user","widget","baseUrl","clientId","redirectUri","authParams","responseType","showLogin","bind","logout","componentDidMount","session","get","response","status","setState","login","history","stop","renderEl","el","loginContainer","claims","email","err","console","log","signOut","render","div"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA,SAASC,UAAT,QAA2B,kBAA3B;;AAEA,MAAMC,SAAN,SAAwBL,SAAxB,CAAkC;AAC9BM,EAAAA,WAAW,GAAG;AACV;AACA,SAAKC,KAAL,GAAa;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAb;AACA,SAAKC,MAAL,GAAc,IAAIP,UAAJ,CAAe;AACzBQ,MAAAA,OAAO,EAAE,sBADgB;AAEzBC,MAAAA,QAAQ,EAAE,YAFe;AAGzBC,MAAAA,WAAW,EAAE,uBAHY;AAIzBC,MAAAA,UAAU,EAAE;AACRC,QAAAA,YAAY,EAAE;AADN;AAJa,KAAf,CAAd;AASA,SAAKC,SAAL,GAAiB,KAAKA,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKC,MAAL,GAAc,KAAKA,MAAL,CAAYD,IAAZ,CAAiB,IAAjB,CAAd;AACH;;AAEDE,EAAAA,iBAAiB,GAAG;AAChB,SAAKT,MAAL,CAAYU,OAAZ,CAAoBC,GAApB,CAAyBC,QAAD,IAAc;AAClC,UAAIA,QAAQ,CAACC,MAAT,KAAoB,UAAxB,EAAoC;AAChC,aAAKC,QAAL,CAAc;AAAEf,UAAAA,IAAI,EAAEa,QAAQ,CAACG;AAAjB,SAAd;AACH,OAFD,MAEO;AACH,aAAKT,SAAL;AACH;AACJ,KAND;AAOH;;AAEDA,EAAAA,SAAS,GAAG;AACRZ,IAAAA,QAAQ,CAACsB,OAAT,CAAiBC,IAAjB;AACA,SAAKjB,MAAL,CAAYkB,QAAZ,CAAqB;AAAEC,MAAAA,EAAE,EAAE,KAAKC;AAAX,KAArB,EACKR,QAAD,IAAc;AACV,WAAKE,QAAL,CAAc;AAAEf,QAAAA,IAAI,EAAEa,QAAQ,CAACS,MAAT,CAAgBC;AAAxB,OAAd;AACH,KAHL,EAIKC,GAAD,IAAS;AACLC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,KANL;AAQH;;AAEDf,EAAAA,MAAM,GAAG;AACL,SAAKR,MAAL,CAAY0B,OAAZ,CAAoB,MAAM;AACtB,WAAKZ,QAAL,CAAc;AAAEf,QAAAA,IAAI,EAAE;AAAR,OAAd;AACA,WAAKO,SAAL;AACH,KAHD;AAIH;;AAEDqB,EAAAA,MAAM,GAAG;AACL,WACI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAK7B,KAAL,CAAWC,IAAX,GACG;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAe,KAAKD,KAAL,CAAWC,IAA1B,MADJ,EAEI;AAAQ,MAAA,OAAO,EAAE,KAAKS,MAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,CADH,GAKG,IANR,EAOK,KAAKV,KAAL,CAAWC,IAAX,GAAkB,IAAlB,GACG;AAAK,MAAA,GAAG,EAAG6B,GAAD,IAAS;AAAE,aAAKR,cAAL,GAAsBQ,GAAtB;AAA4B,OAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARR,CADJ,CADJ,CADJ;AAkBH;;AAjE6B;;AAoElC,eAAejC,UAAU,CAACC,SAAD,CAAzB","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport OktaSignIn from '@okta/okta-signin-widget';\nimport Backbone from 'backbone';\nimport { withRouter } from 'react-router-dom';\n\nclass LoginPage extends Component {\n    constructor() {\n        super();\n        this.state = { user: null };\n        this.widget = new OktaSignIn({\n            baseUrl: 'https://{oktaOrgUrl}',\n            clientId: '{clientId}',\n            redirectUri: 'http://localhost:3000',\n            authParams: {\n                responseType: 'id_token'\n            }\n        });\n\n        this.showLogin = this.showLogin.bind(this);\n        this.logout = this.logout.bind(this);\n    }\n\n    componentDidMount() {\n        this.widget.session.get((response) => {\n            if (response.status !== 'INACTIVE') {\n                this.setState({ user: response.login });\n            } else {\n                this.showLogin();\n            }\n        });\n    }\n\n    showLogin() {\n        Backbone.history.stop();\n        this.widget.renderEl({ el: this.loginContainer },\n            (response) => {\n                this.setState({ user: response.claims.email });\n            },\n            (err) => {\n                console.log(err);\n            }\n        );\n    }\n\n    logout() {\n        this.widget.signOut(() => {\n            this.setState({ user: null });\n            this.showLogin();\n        });\n    }\n\n    render() {\n        return (\n            <Fragment>\n                <div className=\"jumbotron\">\n                    <div className=\"container-fluid\">\n                        {this.state.user ? (\n                            <div className=\"container\">\n                                <div>Welcome, {this.state.user}!</div>\n                                <button onClick={this.logout}>Logout</button>\n                            </div>\n                        ) : null}\n                        {this.state.user ? null : (\n                            <div ref={(div) => { this.loginContainer = div; }} />\n                        )}\n                    </div>\n                </div>\n            </Fragment>\n\n        );\n    }\n}\n\nexport default withRouter(LoginPage);"]},"metadata":{},"sourceType":"module"}